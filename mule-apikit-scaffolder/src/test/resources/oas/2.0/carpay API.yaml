swagger: '2.0'
info:
  description: "This REST API allows DMS companies to receive real-time notifications of customer car payments on behalf of dealers, as well as send needed data to Carpay.<br>
    <br>
    Carpay receives car payments from the web, by phone (IVR), by smartphone apps, and from kiosks. This API enables DMS companies to automatically import those payments into DMS dealers' accounts. This reduces the workload of dealership collections departments.<br>
    <br>
    Changelog:<br>
    - - v1.3.6 - Added DealType model.<br>
    - - v1.3.5 - Added 404 errors for Add/Edit commands if the parent record is missing from the Carpay DB.<br>
    Added nextPaymentDueDate to the DmsTransaction model.<br>
    Deleted the FieldsToMoveOrDeleteLaterForCustomer and FieldsToMoveOrDeleteLaterForScheduledPickupPayment models.<br> 
    - - v1.3.4 - Removed Error models from 401 Unauthorized responses; now they return a short JSON response.<br>
    Rearranged some fields in the dmsTransaction model to be more alphabetic.<br>
    Added the TransactionStatus model, and added the status field to the DmsTransaction model.<br>
    - - v1.3.3 - Removed 400 (bad input) errors from all GET commands.<br>
    - - v1.3.2 - Removed transactionType from dmsTransaction.<br>
    Created PaymentMethod model and added more options to it.<br>
    - - v1.3.1 - Removed alternate command paths; removed amountCharge field from DmsTransaction model.<br>
    - - v1.3.0 - Removed several Customer model fields that were unnecessary.<br>
    Added many fields to the DmsTransaction model, including several 'buckets' to break down each payment.<br>
    - - v1.2.0 - Big changes coming to the Customer model:<br>
    Renamed Sale model back to Customer model, as well as all related paths and parameters, to be more traditional.<br>
    Renamed Buyer model to CustomerContact model, as well as all related paths and parameters, to be more traditional.<br>
    Also move many fields that will be more appropriate in transaction models to temporary FieldsToMoveOrDeleteLater models.<br>
    Added dmsTransactions array to Customer model to ensure data completeness when customer is first posted.<br>
    - - v1.1.0 - Renamed Customer model to Sale model, as well as all related paths and parameters.<br>
    Broke out personal details from the Customer model into a new Buyer model - there can be up to 4 contacts/buyers per sale now.<br>
    - - v1.0.2 - Changed API Name and URL from CarPayDmsApi to CarpayDmsApi<br>
    Changed all floats to strings, to avoid floating point precision problems<br>
    - - v1.0.1 - Added extra, non-standard URLs for POSTing to with additional clarity, such as POST to /customer/delete/{dmsCustomerId}.<br>
    - - v1.0.0 - Changed URLs from plural to singular: /carpayPayment, /customer, /dealer, /dmsTransaction.<br>
    Removed POST commands for Customers, Dealers, and DmsTransactions; now PUT can add or update records.<br>
    PUT commands no longer return 404 errors.<br>
    Added carpayRegCode field to Customer model.<br>
    Added CustomerShort model with /customer/{dmsCustomerId}/short path, and also returned from PUT command.<br>
    Added DealerShort model with /dealer/{dmsDealerId}/short path, and also returned from PUT command.<br>
    Replaced DmsPayment model with DmsTransaction model, to allow much more detail to be shown to customers<br>
    - - v0.9.4 - Changed dmsCustomerId to be strings with dashes allowed; added maxLength to all strings; lateFeesBalance max increased.<br>
    - - v0.9.3 - Changed PUT commands to have the ID in the URL, to be more standard; removed 400 responses to Delete commands.<br>
    - - v0.9.2 - Changed Customer stockNumber to a 10-char string, vehicleOdometer to 10 million max integer, and vehicleVin to 20 chars max; removed 422 error code; removed 400 error code from getDealerInfo.<br>
    - - v0.9.1 - Changed dmsDealerId and carpayPaymentId to be strings with dashes allowed.<br>
    - - v0.9.0 - Original version."
  version: "1.3.6"
  title: Carpay DMS API
  # put the contact info for your development or API team
  contact:
    email: support@carpay.com

# tags are used for organizing operations
tags:
- name: carpayPayment
  description: Operations for Carpay Payments
- name: customer
  description: Operations for Customers (a customer is a loan, and will have 1-4 CustomerContacts attached)
- name: dealer
  description: Operations for Dealers
- name: dmsTransaction
  description: Operations for DMS Transactions

paths:
  /carpayPayment/{carpayPaymentId}:
    get:
      tags:
      - carpayPayment
      summary: Retrieve details of a customer payment made within Carpay; use this after receiving a webhook about a new payment
      operationId: getCarpayPaymentInfo
      produces:
      - application/json
      parameters:
      - in: path
        name: carpayPaymentId
        description: The Carpay Payment ID
        required: true
        type: string
        minLength: 1
        maxLength: 30
      responses:
        200:
          description: Found payment
          schema:
            $ref: '#/definitions/CarpayPayment'
        401:
          description: Unauthorized - Not logged in; returns a short JSON message
        404:
          description: Payment not found; returns nothing
          
  /customer/{dmsCustomerId}:
    get:
      tags:
      - customer
      summary: Retrieve Carpay's version of a DMS dealer's customer record; DMS shouldn't need to use this very often info
      operationId: getCustomerInfo
      produces:
      - application/json
      parameters:
      - in: path
        name: dmsCustomerId
        description: The customer ID in the DMS
        required: true
        type: string
        minLength: 1
        maxLength: 40
      responses:
        200:
          description: Found customer
          schema:
            $ref: '#/definitions/Customer'
        401:
          description: Unauthorized - Not logged in; returns a short JSON message
        404:
          description: Customer not found; returns nothing
    delete:
      tags:
      - customer
      summary: Delete Carpay's copy of a DMS dealer's customer and all associated records; use this after dealer deletes customer in the DMS
      operationId: deleteCustomer
      parameters:
      - in: path
        name: dmsCustomerId
        description: The customer ID in the DMS
        required: true
        type: string
        minLength: 1
        maxLength: 40
      responses:
        204:
          description: Successfully deleted; returns nothing
        401:
          description: Unauthorized - Not logged in; returns a short JSON message
        404:
          description: Customer not found; returns nothing
    put:
      tags:
      - customer
      summary: Add or update a copy of a DMS dealer's customer in Carpay's database after dealer gets a new or updates an old customer
      operationId: addOrUpdateCustomerInfo
      consumes:
      - application/json
      produces:
      - application/json
      parameters:
      - in: path
        name: dmsCustomerId
        description: The customer ID in the DMS
        required: true
        type: string
        minLength: 1
        maxLength: 40
      - in: body
        name: customer
        description: "Customer object that needs to be added or updated; must be a complete object, not partial"
        required: true
        schema:  
          $ref: '#/definitions/Customer'
      responses:
        200:
          description: Successfully added or updated
          # Return the short model after every create or update
          schema:
            $ref: '#/definitions/CustomerShort'
        400:
          description: Bad input parameter(s)
          schema:
            $ref: '#/definitions/Error'
        401:
          description: Unauthorized - Not logged in; returns a short JSON message
        404:
          description: The parent record (a dealer) was not found in the Carpay database

  /dealer/{dmsDealerId}:
    get:
      tags:
      - dealer
      summary: Retrieve Carpay's full version of a DMS dealer's info; DMS shouldn't need to use this very often
      operationId: getDealerInfo
      produces:
      - application/json
      parameters:
      - in: path
        name: dmsDealerId
        description: The unique dealer ID in the DMS (see the Dealer model)
        required: true
        type: string
        minLength: 1
        maxLength: 30
      responses:
        200:
          description: Found dealer
          schema:
            $ref: '#/definitions/Dealer'
        401:
          description: Unauthorized - Not logged in; returns a short JSON message
        404:
          description: Dealer not found; returns nothing
    delete:
      tags:
      - dealer
      summary: Delete Carpay's copy of a DMS dealer and all associated records; use this after dealer un-integrates with Carpay or cancels DMS account
      operationId: deleteDealer
      parameters:
      - in: path
        name: dmsDealerId
        description: The unique dealer ID in the DMS (see the Dealer model)
        required: true
        type: string
        minLength: 1
        maxLength: 30
      responses:
        204:
          description: Successfully deleted; returns nothing
        401:
          description: Unauthorized - Not logged in; returns a short JSON message
        404:
          description: Dealer not found; returns nothing
    put:
      tags:
      - dealer
      summary: Add or update a copy of a DMS dealer in Carpay's database after dealer integrates or updates their info or preferences
      operationId: addOrUpdateDealerInfo
      consumes:
      - application/json
      produces:
      - application/json
      parameters:  
      - in: path
        name: dmsDealerId
        description: The unique dealer ID in the DMS (see the Dealer model)
        required: true
        type: string
        minLength: 1
        maxLength: 30
      - in: body
        name: dealer
        description: "Dealer object that needs to be added or updated; must be a complete object, not partial"
        required: true
        schema:  
          $ref: '#/definitions/Dealer'
      responses:
        200:
          description: Successfully added or updated
          # Return the short version of the model after every create or update
          schema:
            $ref: '#/definitions/DealerShort'
        400:
          description: Bad input parameter(s)
          schema:
            $ref: '#/definitions/Error'
        401:
          description: Unauthorized - Not logged in; returns a short JSON message

  /dealer/{dmsDealerId}/short:
    get:
      tags:
      - dealer
      summary: Retrieve Carpay's short version of a DMS dealer's info, mainly for getting the autoLoginToken; this is much more efficient than retrieving the entire dealer model
      operationId: getDealerShort
      produces:
      - application/json
      parameters:
      - in: path
        name: dmsDealerId
        description: The unique dealer ID in the DMS (see the Dealer model)
        required: true
        type: string
        minLength: 1
        maxLength: 30
      responses:
        200:
          description: Found dealer; returning only two dealer fields
          schema:
            $ref: '#/definitions/DealerShort'
        401:
          description: Unauthorized - Not logged in; returns a short JSON message
        404:
          description: Dealer not found; returns nothing

  /dmsTransaction/{dmsTransactionId}:
    get:
      tags:
      - dmsTransaction
      summary: Retrieve Carpay's version of DMS transaction details; includes DMS-entered and Carpay-entered payments; DMS shouldn't need to use this very often
      operationId: getDmsTransactionInfo
      produces:
      - application/json
      parameters:
      - in: path
        name: dmsTransactionId
        description: The DMS Transaction ID
        required: true
        type: string
        minimum: 1
        maximum: 30
      responses:
        200:
          description: Found transaction
          schema:
            $ref: '#/definitions/DmsTransaction'
        401:
          description: Unauthorized - Not logged in; returns a short JSON message
        404:
          description: Transaction not found; returns nothing
    delete:
      tags:
      - dmsTransaction
      summary: Delete Carpay's copy of a DMS transaction; use this after dealer deletes a payment within the DMS; payments get deleted automatically if dealer or customer get deleted
      operationId: deleteDmsTransaction
      parameters:
      - in: path
        name: dmsTransactionId
        description: The DMS Transaction ID
        required: true
        type: string
        minimum: 1
        maximum: 30
      responses:
        204:
          description: Successfully deleted
        401:
          description: Unauthorized - Not logged in; returns a short JSON message
        404:
          description: Transaction not found; returns nothing
    put:
      tags:
      - dmsTransaction
      summary: Add or update a copy of a DMS transaction in Carpay's database after dealer integrates or updates the payment within the DMS
      operationId: addOrUpdateDmsTransactionInfo
      consumes:
      - application/json
      produces:
      - application/json
      parameters:  
      - in: path
        name: dmsTransactionId
        description: The DMS Transaction ID
        required: true
        type: string
        minimum: 1
        maximum: 30
      - in: body
        name: dmsTransaction
        description: "DMS transaction object that needs to be added or updated; must be a complete object, not partial"
        required: true
        schema:  
          $ref: '#/definitions/DmsTransaction'
      responses:
        200:
          description: Successfully added or updated
          # Return the model after every create or update
          schema:
            $ref: '#/definitions/DmsTransaction'
        400:
          description: Bad input parameter(s)
          schema:
            $ref: '#/definitions/Error'
        401:
          description: Unauthorized - Not logged in; returns a short JSON message
        404:
          description: The parent record (a customer) was not found in the Carpay database

  #/events TODO - webhook events
  
definitions:
  AccountsReceivableType:
    description: "The A/R state of a customer or transaction; most commonly it is OPEN; varies by DMS"
    type: string
    enum:  
      - "BANKRUPT"
      - "CHARGE OFF"
      - "FINANCE BEGIN"
      - "OPEN"
      - "OUTSIDE"
      - "PAID OUT"
      - "REPO"
      - "WHOLESALE"
      - "OTHER"
    example: "OPEN"
  # End of AccountsReceivableType definition

  CarpayPayment:
    type: object
    required:
    - carpayPaymentId
    - dmsCustomerId
    - dmsDealerId
    - actualTransactionUnixTime
    - paymentMethod
    - referenceNumber
    - totalAmountWithConvenienceFee
    - totalAmountWithoutConvenienceFee
    properties:
      carpayPaymentId:
        description: Carpay's Payment ID; used by Carpay to check status of this payment in the DMS later; only one instance of this transaction should be in the DMS database; it may have one or more dashes
        type: string
        minLength: 1
        maxLength: 30
        example: "12345678-123"
      dmsCustomerId:
        description: The customer ID in the DMS
        type: string
        minLength: 1
        maxLength: 40
        example: "123456-123-782"
      dmsDealerId:
        description: The unique dealer ID in the DMS for the specified customer (see the Dealer model)
        type: string
        minLength: 1
        maxLength: 30
        example: "123456789-123"
      actualTransactionUnixTime:
        description: The time when the transaction was actually processed, in UNIX epoch format
        type: integer
        format: int64
        minimum: 946684800
        maximum: 4102444800
        example: 1480359483
      paymentMethod:
        description: The payment method used, as a string; more types to be added later
        $ref: '#/definitions/PaymentMethod'
      referenceNumber:
        description: The Reference Number of the transaction from the payment gateway, or the check number; can be printed on receipts
        type: string
        minLength: 1
        maxLength: 30
        example: "RXJ387142"
      totalAmountWithConvenienceFee:
        description: The total amount paid, including the Convenience Fee; the fee does not affect the loan at all within the DMS; min "0.01", max "100000000.00"
        type: string
        minLength: 1
        maxLength: 12
        example: "152.99"
      totalAmountWithoutConvenienceFee:
        description: The total amount paid, NOT including the Convenience Fee; this is the amount that affects the loan within the DMS; min "0.01", max "100000000.00"
        type: string
        minLength: 1
        maxLength: 12
        example: "150.00"
  # End of CarpayPayment definition

  Customer:
    type: object
    required:
    # Note: All fields are required, but many can be empty
    - dmsCustomerId
    - dmsDealerId
    # TODO: Add other required fields here
    properties:
      dmsCustomerId:
        description: The unique customer ID in the DMS system; if there is not a unique number in the DMS system, please prepend the dmsDealerId and a dash, such as "123456789" or "123456-123-782"
        type: string
        minLength: 1
        maxLength: 40
        example: "123456-123-782"
      dmsDealerId:
        description: The unique dealer ID in the DMS for this customer (see the Dealer model)
        type: string
        minLength: 1
        maxLength: 30
        example: "123456789-123"
      carpayRegCode:
        description: A read-only value created by Carpay that can be printed on customers' DMS receipts, used for registering on the Carpay website
        type: string
        minLength: 1
        maxLength: 30
        example: "38284-vF9eKB"
      accountNumber:  
        description: "The customer's Account Number in the DMS (from the dealer's perspective), if available"
        type: string
        minLength: 0
        maxLength: 20
        example: 1234
      amountToFinance:  
        description: Amount to Finance, which is basically the original principal; min "0.00", max "100000000.00"
        type: string
        minLength: 1
        maxLength: 12
        example: "10000.00"
      apr:  
        description: The loan APR; min "0.0000", max "100.0000"
        type: string
        minLength: 1
        maxLength: 8
        example: "25.0000"
      arType:  
        description: Dealer-defined A/R Type, such as 0=Unknown, 1=Open, 2=Wholesale, 48=Reposessed, etc
        type: integer
        format: int32
        minimum: 0
        maximum: 1000
        example: 1
      customerContacts:
        description: List of contacts/buyers for this customer (1 to 4 per sale)
        type: array
        items:
          $ref: '#/definitions/CustomerContact'
      daysBeforeLate:    
        description: "Grace period before late fees are charged; Ex: if it is 1, then the day after the due date will be considered late and can incur a late fee"
        type: integer  
        format: int32  
        minimum: 0  
        maximum: 365  
        example: 5  
      dealType:    
        description: "The Type of Deal: BP=BHPH Pre-Computed Interest, BS=BHPH Simple Interest, WHOLE=Wholesale"
        $ref: '#/definitions/DealType'  
      dealerSaleId:  
        description: The dealer's Sale ID for this sale, if available; not to be confused with the dmsSaleId
        type: integer
        format: int32
        minimum: 0
        maximum: 1000000
        example: 180
      dmsTransactions:
        description: List of transactions the DMS has for this customer so far; it's safest to include these when posting a customer so that Carpay knows all data has been received
        type: array
        items:
          $ref: '#/definitions/DmsTransaction'
      downPayment:  
        description: The Down Payment; min "0.00", max "100000000.00"
        type: string
        minLength: 1
        maxLength: 12
        example: "2000.00"
      finalPaymentAmount:  
        description: The Final scheduled Payment Amount; min "-10000000.00", max "100000000.00"
        type: string
        minLength: 1
        maxLength: 12
        example: "100.00"
      financeCharge:  
        description: The Finance Charge from the deal; min "0.00", max "100000000.00"
        type: string
        minLength: 1
        maxLength: 12
        example: "2345.67"
      firstPaymentDueDate:  
        description: The Date of Sale; leave blank if unknown
        type: string
        format: date
        example: "2017-01-31"
      isLateFeeChargedOnPickups:  
        description: If true, then pickup payments can be charged late fees using the regular late fee options
        type: boolean
        example: true
      isLateFeeChargedPerPayment:  
        description: If true, then every missed scheduled payment is charged a fee; otherwise only one fee is charged for multiple missed payments
        type: boolean
        example: true
      lateFeePercentage:  
        description: Percentage of the Remaining Scheduled Payment Amount to charge as a late fee; "0" if not used; min "0.0000", max "100.0000"
        type: string
        minLength: 1
        maxLength: 8
        example: "90.0000"
      lateFeePerDay:  
        description: Fixed late fee amount to charge per day after the grace period; "0.00" if not used; min "0.00", max "1000.00"
        type: string
        minLength: 1
        maxLength: 7
        example: "10.00"
      lateFeeMinimum:  
        description: Increases any charged late fee to this value if needed; "0.00" if not used; min "0.00", max "1000.00"
        type: string
        minLength: 1
        maxLength: 7
        example: "25.00"
      lateFeeMaximum:  
        description: Decreases any charged late fee to this value if needed; "0.00" means no maximum; min "0.00", max "1000.00"
        type: string
        minLength: 1
        maxLength: 7
        example: "50.00"
      numberOfPayments:  
        description: The Number of Payments scheduled from the deal
        type: integer
        format: int32
        minimum: 0
        maximum: 1000
        example: 35
      numberOfTradeIns:  
        description: The Number of Trade-ins
        type: integer
        format: int32
        minimum: 0
        maximum: 100
        example: 2
      openingBalance:  
        description: The Opening Balance for this account; may be DMS-specific; min "-10000000.00", max "100000000.00"
        type: string
        minLength: 1
        maxLength: 12
        example: "12345.67"
      paymentAmount:  
        description: The typical Payment Amount; the first and last payments may be different; min "0.00", max "100000000.00"
        type: string
        minLength: 1
        maxLength: 12
        example: "250.00"
      paymentPeriod:  
        description: The Payment Period (frequency)
        type: string  
        enum:  
          - "BI-WEEKLY"
          - "MONTHLY"
          - "SEMI-MONTHLY"
          - "WEEKLY"
        example: "MONTHLY"  
      paymentsAreBlocked:    
        description: Customer is blocked from making payments  
        type: boolean  
        example: true  
      pickupPaymentScheduleArray:
        description: An array of scheduled pickup payments (can be an empty array)  
        type: array  
        items:  
          $ref: '#/definitions/ScheduledPickupPayment'
        minItems: 0  
        maxItems: 10
      regularPaymentScheduleArray:    
        description: An array of scheduled regular payments (can be an empty array) 
        type: array  
        items:  
          $ref: '#/definitions/ScheduledRegularPayment'
        minItems: 0  
        maxItems: 1000
      saleDate:  
        description: The Date of Sale; leave blank if unknown
        type: string
        format: date
        example: "2017-01-31"
      semiMonthlyDay1:  
        description: For semi-monthly customers, this is the first payment day of the month; 0 otherwise
        type: integer
        format: int32
        minimum: 0
        maximum: 31
        example: 14
      semiMonthlyDay2:  
        description: For semi-monthly customers, this is the second payment day of the month; 0 otherwise
        type: integer
        format: int32
        minimum: 0
        maximum: 31
        example: 28
      sideNotePaymentAmount:  
        description: The typical Payment Amount for the Side Note; min "0.00", max "100000000.00"
        type: string
        minLength: 1
        maxLength: 12
        example: "150.00"
      sideNotePaymentPeriod:  
        description: The Side Note Payment Period (frequency)
        type: string  
        enum:  
          - "BI-WEEKLY"
          - "MONTHLY"
          - "SEMI-MONTHLY"
          - "WEEKLY"
        example: "MONTHLY"  
      sideNoteStartDate:  
        description: The date the Side Note was started; leave blank if unknown
        type: string
        format: date
        example: "2017-01-31"
      sideNoteStartingAmount:  
        description: The Amount of the Side Note when it opened; min "0.00", max "100000000.00"
        type: string
        minLength: 1
        maxLength: 12
        example: "250.00"
      stockNumber:  
        description: The Stock Number for the vehicle
        type: string
        minLength: 0
        maxLength: 10
        example: "123"
      totalOfPayments:  
        description: The Total of all scheduled Payments from the deal; may be DMS-specific; min "0.00", max "100000000.00"
        type: string
        minLength: 1
        maxLength: 12
        example: "12345.67"
      totalSalePrice:  
        description: The Total Sale Price; may be DMS-specific; min "0.00", max "100000000.00"
        type: string
        minLength: 1
        maxLength: 12
        example: "12345.67"
      tradeInAcvTotal:  
        description: The total of all Trade-in ACV amounts; min "0.00", max "100000000.00"
        type: string
        minLength: 1
        maxLength: 12
        example: "2500.00"
      tradeInAllowanceTotal:  
        description: The total of all Trade-in Allowances; min "0.00", max "100000000.00"
        type: string
        minLength: 1
        maxLength: 12
        example: "2500.00"
      tradeInPayoffTotal:  
        description: The total of all Trade-in Payoff amounts; min "0.00", max "100000000.00"
        type: string
        minLength: 1
        maxLength: 12
        example: "2500.00"
      vehicleMake:  
        description: The vehicle's Make
        type: string
        minLength: 1
        maxLength: 20
        example: Chevrolet
      vehicleModel:  
        description: The vehicle's Model
        type: string
        minLength: 1
        maxLength: 30
        example: Corvette
      vehicleOdometer:  
        description: The vehicle's Odometer
        type: integer
        format: int32
        minimum: 0
        maximum: 10000000
        example: 123456
      vehicleVin:  
        description: The vehicle's VIN
        type: string
        minLength: 17
        maxLength: 20
        example: 2HGCM82633A0043XY
      vehicleYear:  
        description: The vehicle's Year
        type: integer
        format: int32
        minimum: 1900
        maximum: 2100
        example: 2005
  # End of Customer definition
  
  CustomerContact:
    type: object
    required:
    # Note: All fields are required, but many can be empty
    - dmsCustomerId
    - contactType
    # TODO: Add other required fields here
    properties:
      dmsCustomerId:
        description: The customer ID that this contact belongs to; there can be 1 to 4 contacts/buyer per customer; the dmsCustomerId plus contactType uniquely identify the contact/buyer
        type: string
        minLength: 1
        maxLength: 40
        example: "123456-123-782"
      contactType:
        description: "The Type of Contact for the customer (up to 4 contacts/buyers per sale): PR=Primary, SP=Spouse, CB=Co-Buyer, CS=Co-Signer"
        type: string  
        enum:  
          - "PR"
          - "SP"
          - "CB"
          - "CS"
        example: "PR"  
      birthDate:  
        description: Customer's Date of Birth; leave blank if unknown
        type: string
        format: date
        example: "2017-01-31"
      driversLicenseNumber:  
        description: "Customer's Driver's License Number"
        type: string
        minLength: 0
        maxLength: 30
        example: L123-456-78-901-2
      driversLicenseState:
        description: "Customer's Driver's License State (2-char abbreviation)"
        type: string
        minLength: 0
        maxLength: 2
        example: NC
      email:  
        description: Customer's Email Address
        type: string
        minLength: 0
        maxLength: 50
        example: name@gmail.com
      employerBusinessName:  
        description: Business name of customer's employer
        type: string
        minLength: 0
        maxLength: 50
        example: Washington
      insuranceAgency:  
        description: Customer's Insurance Agency (such as the local branch name)
        type: string
        minLength: 0
        maxLength: 50
        example: State Farm - Northwest Charlotte
      insuranceAgencyPhone:  
        description: Customer's Insurance Agency Phone number
        type: string
        minLength: 0
        maxLength: 16
        example: 555-123-4567
      insuranceCompanyName:  
        description: Customer's Insurance Company Name
        type: string
        minLength: 0
        maxLength: 50
        example: GEICO INSURANCE COMPANY
      insuranceExpirationDate:  
        description: Customer's Insurance Expiration Date; leave blank if unknown
        type: string
        format: date
        example: "2017-01-31"
      insurancePolicyNumber:  
        description: Customer's Insurance Policy Number
        type: string
        minLength: 0
        maxLength: 30
        example: 123-AL 1234567
      mailingAddressLine1:  
        description: Line 1 of the customer's Address
        type: string
        minLength: 0
        maxLength: 50
        example: 123 Main St.
      mailingAddressLine2:  
        description: Line 2 of the customer's Address
        type: string
        minLength: 0
        maxLength: 50
        example: "Apt #3"
      mailingAddressCity:  
        description: Customer's City
        type: string
        minLength: 0
        maxLength: 30
        example: Charlotte
      mailingAddressState:  
        description: Customer's State (2-char abbreviation)
        type: string
        minLength: 0
        maxLength: 2
        example: NC
      mailingAddressZip:  
        description: Customer's ZIP code, like 01234, 12345, or 12345-6789
        type: string
        minLength: 0
        maxLength: 10
        example: 12345
      mailingAddressCounty:  
        description: Customer's County
        type: string
        minLength: 0
        maxLength: 30
        example: Washington
      nameFirst:  
        description: The customer's First Name
        type: string
        minLength: 1
        maxLength: 30
        example: John
      nameMiddle:  
        description: The customer's Middle Name
        type: string
        minLength: 0
        maxLength: 30
        example: David
      nameLast:  
        description: The customer's Last Name
        type: string
        minLength: 1
        maxLength: 30
        example: Smith
      phoneNumberCell:  
        description: Customer's Cell Phone number
        type: string
        minLength: 0
        maxLength: 16
        example: 555-123-4567
      phoneNumberHome:  
        description: Customer's Home Phone number
        type: string
        minLength: 0
        maxLength: 16
        example: 555-123-4567
      phoneNumberWork:  
        description: Customer's Work Phone number
        type: string  
        minLength: 0
        maxLength: 16  
        example: 555-123-4567  
      physicalAddressLine1:  
        description: Line 1 of the customer's Address
        type: string
        minLength: 0
        maxLength: 50
        example: 123 Main St.
      physicalAddressLine2:  
        description: Line 2 of the customer's Address
        type: string
        minLength: 0
        maxLength: 50
        example: "Apt #3"
      physicalAddressCity:  
        description: Customer's City
        type: string
        minLength: 0
        maxLength: 30
        example: Charlotte
      physicalAddressState:  
        description: Customer's State (2-char abbreviation)
        type: string
        minLength: 0
        maxLength: 2
        example: NC
      physicalAddressZip:  
        description: Customer's ZIP code, like 01234, 12345, or 12345-6789
        type: string
        minLength: 0
        maxLength: 10
        example: 12345
      physicalAddressCounty:  
        description: Customer's County
        type: string
        minLength: 0
        maxLength: 30
        example: Washington
      ssn:  
        description: Customer's SSN, without dashes (should be hashed/encrypted after transfer)
        type: string
        minLength: 0
        maxLength: 11
        example: "123456789"
  # End of CustomerContact definition

  CustomerShort:
    type: object
    required:
    # Note: All fields are required, but many can be empty
    - dmsCustomerId
    - dmsDealerId
    - carpayRegCode
    properties:
      dmsCustomerId:
        description: The unique customer ID in the DMS system; if there is not a unique number in the DMS system, please prepend the dmsDealerId and a dash, such as "123456789" or "123456-123-782"
        type: string
        minLength: 1
        maxLength: 40
        example: "123456-123-782"
      dmsDealerId:
        description: The unique dealer ID in the DMS for this customer (see the Dealer model)
        type: string
        minLength: 1
        maxLength: 30
        example: "123456789-123"
      carpayRegCode:
        description: A read-only value created by Carpay that can be printed on customers' DMS receipts, used for registering on the Carpay website
        type: string
        minLength: 1
        maxLength: 30
        example: "38284-vF9eKB"
  # End of CustomerShort definition

  DealType:
    description: "The Type of Deal for a car sale: BP=BHPH Pre-Computed Interest, BS=BHPH Simple Interest, WHOLE=Wholesale"
    type: string
    enum:
      - "BP"
      - "BS"
      - "WHOLE"
    example: "BP"
  # End of DealType definition

  Dealer:
    type: object
    required:
    - dmsDealerId
    - carCompanyPublicBusinessName
    - dealershipPhone
    - adminFirstName
    - adminLastName
    - carCompanyPhysicalAddressLine1
    - carCompanyPhysicalAddressCity
    - carCompanyPhysicalAddressState
    - carCompanyPhysicalAddressZip
    properties:
      dmsDealerId:
        description: The unique dealer ID in the DMS system; if there are multiple IDs in the DMS for one dealer location, please combine them with dashes, using the most significant ID first, such as DatabaseNumber 782 + CompanyNumber 123456 + StoreNumber 3 = "782-123456-3"
        type: string
        minLength: 1
        maxLength: 30
        example: "782-123456-3"
      autoLoginToken:
        description: This read-only token is created by Carpay and can by used by the DMS to log the dealer into their account on the Carpay website
        type: string
        minLength: 32
        maxLength: 32
        example: aF39fwj8f9h283Ehfaksdjxfh98H23fh
      carCompanyPublicBusinessName:
        description: The public name (DBA) of the dealership
        type: string
        minLength: 3
        maxLength: 50
        example: ABC Motors
      carCompanyLegalBusinessName:
        description: The legal name of the dealership
        type: string
        minLength: 3
        maxLength: 50
        example: Jack Stevens Cars, LLC
      financeCompanyPublicBusinessName:
        description: The public name (DBA) of the Related Finance Company (if available)
        type: string
        minLength: 3
        maxLength: 50
        example: Jack Stevens Financing
      financeCompanyLegalBusinessName:
        description: The legal name of the Related Finance Company (if available)
        type: string
        minLength: 3
        maxLength: 50
        example: ABC Finance, Inc.
      dealershipPhone:
        description: Dealership phone number
        type: string
        minLength: 7
        maxLength: 30
        example: (405) 555-1234
      dealershipWebsite:
        description: Dealership website (if available)
        type: string
        minLength: 3
        maxLength: 100
        example: www.abcmotors.com
      adminFirstName:
        description: First name of the owner or main company contact
        type: string
        minLength: 1
        maxLength: 30
        example: Jack
      adminLastName:
        description: Last name of the owner or main company contact
        type: string
        minLength: 1
        maxLength: 30
        example: Stevens
      adminEmail:
        description: Email address of the owner or main company contact
        type: string
        minLength: 5
        maxLength: 50
        example: jack@abcmotors.com
      legalContactFirstName:
        description: First name of the dealership owner
        type: string
        minLength: 1
        maxLength: 30
        example: Jack
      legalContactLastName:
        description: Last name of the dealership owner
        type: string
        minLength: 1
        maxLength: 30
        example: Stevens
      carCompanyPhysicalAddressLine1:
        description: Actual location of dealership
        type: string
        minLength: 3
        maxLength: 50
        example: 123 Main Street
      carCompanyPhysicalAddressLine2:
        description: Line 2 (optional)
        type: string
        minLength: 1
        maxLength: 50
        example: "Suite #7"
      carCompanyPhysicalAddressCity:
        description: City
        type: string
        minLength: 3
        maxLength: 30
        example: Anytown
      carCompanyPhysicalAddressState:
        description: 2-char abbreviation
        type: string
        minLength: 2
        maxLength: 2
        example: TX
      carCompanyPhysicalAddressZip:
        description: Like 0123, 12345, or 12345-6789
        type: string
        minLength: 4
        maxLength: 10
        example: 12345
      carCompanyMailingAddressLine1:
        description: Mailing address of the car company
        type: string
        minLength: 3
        maxLength: 50
        example: 123 Main Street
      carCompanyMailingAddressLine2:
        description: Line 2 (optional)
        type: string
        minLength: 1
        maxLength: 50
        example: "Suite #7"
      carCompanyMailingAddressCity:
        description: City
        type: string
        minLength: 3
        maxLength: 30
        example: Anytown
      carCompanyMailingAddressState:
        description: 2-char abbreviation
        type: string
        minLength: 2
        maxLength: 2
        example: TX
      carCompanyMailingAddressZip:
        description: Like 0123, 12345, or 12345-6789
        type: string
        minLength: 4
        maxLength: 10
        example: 12345
      carCompanyFederalTaxId:
        description: The EIN of the car company (if available)
        type: string
        minLength: 9
        maxLength: 10
        example: 12-3456789
      carCompanyDateOpened:
        description: When the dealership company was created; leave blank if unknown
        type: string
        format: date
        example: "2017-01-31"
      financeCompanyPhysicalAddressLine1:
        description: Actual location of finance company (if available)
        type: string
        minLength: 3
        maxLength: 50
        example: 123 Main Street
      financeCompanyPhysicalAddressLine2:
        description: Line 2 (optional)
        type: string
        minLength: 1
        maxLength: 50
        example: "Suite #7"
      financeCompanyPhysicalAddressCity:
        description: City
        type: string
        minLength: 3
        maxLength: 30
        example: Anytown
      financeCompanyPhysicalAddressState:
        description: 2-char abbreviation
        type: string
        minLength: 2
        maxLength: 2
        example: TX
      financeCompanyPhysicalAddressZip:
        description: Like 0123, 12345, or 12345-6789
        type: string
        minLength: 4
        maxLength: 10
        example: 12345
      financeCompanyMailingAddressLine1:
        description: Mailing address of the finance company (if available)
        type: string
        minLength: 3
        maxLength: 50
        example: 123 Main Street
      financeCompanyMailingAddressLine2:
        description: Line 2 (optional)
        type: string
        minLength: 1
        maxLength: 50
        example: "Suite #7"
      financeCompanyMailingAddressCity:
        description: City
        type: string
        minLength: 3
        maxLength: 30
        example: Anytown
      financeCompanyMailingAddressState:
        description: 2-char abbreviation
        type: string
        minLength: 2
        maxLength: 2
        example: TX
      financeCompanyMailingAddressZip:
        description: Like 0123, 12345, or 12345-6789
        type: string
        minLength: 4
        maxLength: 10
        example: 12345
      financeCompanyFederalTaxId:
        description: The EIN of the finance company (if available)
        type: string
        minLength: 9
        maxLength: 10
        example: 12-3456789
      financeCompanyDateOpened:
        description: When the dealership company was created; leave blank if unknown
        type: string
        format: date
        example: "2017-01-31"
  # End of Dealer definition

  DealerShort:
    type: object
    required:
    - dmsDealerId
    - autoLoginToken
    properties:
      dmsDealerId:
        description: The unique dealer ID in the DMS system; if there are multiple IDs in the DMS for one dealer location, please combine them with dashes, using the most significant ID first, such as DatabaseNumber 782 + CompanyNumber 123456 + StoreNumber 3 = "782-123456-3"
        type: string
        minLength: 1
        maxLength: 30
        example: "123456-123"
      autoLoginToken:
        description: This token is created by Carpay and can by used by the DMS to log the dealer into their account on the Carpay website
        type: string
        minLength: 32
        maxLength: 32
        example: aF39fwj8f9h283Ehfaksdjxfh98H23fh
  # End of DealerShort definition
  
  DmsTransaction:
    type: object
    required:
    - dmsTransactionId
    - dmsCustomerId
    - dmsDealerId
    - actualTransactionUnixTime
    - statedTransactionDate
    - dueDate
    - arType
    - paymentMethod
    - referenceNumber
    - transDescription
    - amountTotal
    - amountBadCheckCharges
    - amountChargebacks
    - amountInterest
    - amountLateFees
    - amountPickups
    - amountPrincipal
    - amountSalesTax
    - amountSideNote
    - amountUnpaidInterestCalculated
    - balancePickupPayments
    - balanceRunning
    - balanceSideNote
    - balanceUnpaidInterest
    - nextPaymentDueDate
    - affectedPickupPaymentScheduleArray
    - affectedRegularPaymentScheduleArray
    properties:
      dmsTransactionId:
        description: DMS's Transaction ID; represent a single, complete payment and/or adjustment, credit, void, etc.
        type: string
        minLength: 1
        maxLength: 30
        example: "123"
      dmsCustomerId:
        description: The customer ID in the DMS
        type: string
        minLength: 1
        maxLength: 40
        example: "123456-123-782"
      dmsDealerId:
        description: The unique dealer ID for the specified customer (see the Dealer model)
        type: string
        minLength: 1
        maxLength: 30
        example: "123456-123"
      actualTransactionUnixTime:
        description: The time when the transaction was actually processed, in UNIX epoch format
        type: integer
        format: int64
        minimum: 946684800
        maximum: 4102444800
        example: 1480359483
      statedTransactionDate:
        description: The effective date of the transaction; can be decided by the dealer; for example, a weekend payment could be applied to the previous Friday
        type: string
        format: date
        example: "2017-01-31"
      dueDate:
        description: The earliest due date from the payment schedule that this transaction gets applied to; note that big payments can affect multiple scheduled payments
        type: string
        format: date
        example: "2017-01-31"
      arType:
        description: Accounts Receivable type for this transaction
        $ref: '#/definitions/AccountsReceivableType' 
      paymentMethod:
        description: The payment method used, as a string; more types to be added later
        $ref: '#/definitions/PaymentMethod'
      referenceNumber:
        description: The Reference Number of the transaction from the payment gateway, or the check number; can be printed on receipts
        type: string
        minLength: 1
        maxLength: 30
        example: "RXJ387142"
      status:
        description: The status of the transaction, such as normal or voided
        $ref: '#/definitions/TransactionStatus'
      transDescription:
        description: A description of the transaction - need better examples here!!!
        type: string
        minLength: 1
        maxLength: 30
        example: "Customer made a payment"
      amountTotal:
        description: The total amount paid; min "-10000000.00", max "100000000.00"
        type: string
        minLength: 1
        maxLength: 12
        example: "152.99"
      amountBadCheckCharges:
        description: The total of bad check charges; min "-10000000.00", max "100000000.00"
        type: string
        minLength: 1
        maxLength: 12
        example: "152.99"
      amountChargebacks:
        description: The total of chargebacks; min "-10000000.00", max "100000000.00"
        type: string
        minLength: 1
        maxLength: 12
        example: "152.99"
      amountInterest:
        description: The total of interest paid; min "-10000000.00", max "100000000.00"
        type: string
        minLength: 1
        maxLength: 12
        example: "152.99"
      amountLateFees:
        description: The total of late fees paid; min "-10000000.00", max "100000000.00"
        type: string
        minLength: 1
        maxLength: 12
        example: "152.99"
      amountPickups:
        description: The total applied to pickup payments; min "0", max "100000000.00"
        type: string
        minLength: 1
        maxLength: 12
        example: "152.99"
      amountPrincipal:
        description: The total applied to principal; min "0", max "100000000.00"
        type: string
        minLength: 1
        maxLength: 12
        example: "152.99"
      amountSalesTax:
        description: The total of sales tax paid; min "0", max "100000000.00"
        type: string
        minLength: 1
        maxLength: 12
        example: "152.99"
      amountSideNote:
        description: The total applied to the side note; min "0", max "100000000.00"
        type: string
        minLength: 1
        maxLength: 12
        example: "152.99"
      amountUnpaidInterestCalculated:
        description: The amount of unpaid interest calculated for this transaction; min "0", max "100000000.00"
        type: string
        minLength: 1
        maxLength: 12
        example: "152.99"
      balancePickupPayments:
        description: The total balance of all pickup payments after this transaction; min "-10000000.00", max "100000000.00"
        type: string
        minLength: 1
        maxLength: 12
        example: "152.99"
      balanceRunning:
        description: The running balance - NEED MORE INFO HERE!; min "-10000000.00", max "100000000.00"
        type: string
        minLength: 1
        maxLength: 12
        example: "152.99"
      balanceSideNote:
        description: The balance of the side note after this transaction; min "-10000000.00", max "100000000.00"
        type: string
        minLength: 1
        maxLength: 12
        example: "152.99"
      balanceUnpaidInterest:
        description: The balance of unpaid interest after this transaction; min "-10000000.00", max "100000000.00"
        type: string
        minLength: 1
        maxLength: 12
        example: "152.99"
      nextPaymentDueDate:  
        description: The updated Next Payment Due Date (may be different than the original schedule); leave blank if unknown
        type: string
        format: date
        example: "2017-01-31"
      affectedPickupPaymentScheduleArray:
        description: An array of which scheduled pickup payments are affected by this transaction (can be an empty array)
        type: array
        items:
          $ref: '#/definitions/ScheduledPickupPayment'
        minItems: 0
        maxItems: 10
      affectedRegularPaymentScheduleArray:
        description: An array of scheduled regular payments are affected by this transaction (can be an empty array)
        type: array
        items:
          $ref: '#/definitions/ScheduledRegularPayment'
        minItems: 0
        maxItems: 1000
  # End of DmsTransaction definition
  
  Error:
    type: object
    required:
      - code
    properties:
      code:
        description: HTTP error code
        type: integer
        format: int32
        minimum: 100
        maximum: 600
        example: 400
      message:
        description: Optional error message description
        type: string
        maxLength: 65535
      errorFields:
        description: List of fields that failed validation
        type: array
        items:
          $ref: '#/definitions/ErrorField'
  # End of Error definition

  ErrorField:
    type: object
    required:
    - fieldName
    properties:
      fieldName:
        description: Field that failed validation
        type: string
        example: financeCompanyDateOpened
        maxLength: 50
      errorMessage:
        description: Description of this field's failure
        type: string
        maxLength: 255
        example: "'Field was blank.', or 'Value was too high.'"
  # End of ErrorField definition

  PaymentMethod:
    description: "The payment method used for a Carpay or DMS transaction"
    type: string
    enum:  
      - "ACH"
      - "CASH"
      - "CASHIERS CHECK"
      - "CHECK"
      - "CREDIT CARD"
      - "CREDIT/DEBIT CARD"
      - "DEBIT CARD"
      - "ECHECK"
      - "MONEY ORDER"
      - "ONLINE"
      - "OTHER"
      - "TRAVELERS CHECK"
      - "UNKNOWN"
    example: "CASH"
  # End of PaymentMethod definition

  ScheduledPickupPayment:
    type: object
    required:
    - dueDate
    - originalAmountDue
    - amountPaid
    - amountRemaining
    properties:
      dueDate:
        description: Scheduled payment date; leave blank if unknown
        type: string
        format: date
        example: "2017-01-31"
      originalAmountDue:
        description: Total amount due from the deal; min "0.00", max "100000000.00"
        type: string
        minLength: 1
        maxLength: 12
        example: "1000.00"
      amountPaid:
        description: Total amount paid so far; min "0.00", max "100000000.00"
        type: string
        minLength: 1
        maxLength: 12
        example: "800.00"
      amountRemaining:
        description: The balance for this scheduled payment; min "-10000000.00", max "100000000.00"
        type: string
        minLength: 1
        maxLength: 12
        example: "200.00"
  # End of ScheduledPickupPayment definition
        
  ScheduledRegularPayment:
    type: object
    required:
    - originalDueDate
    - modifiedDueDate
    - originalAmountDue
    - amountPaid
    - amountRemaining
    properties:
      originalDueDate:
        description: Due Date from the deal; leave blank if unknown
        type: string
        format: date
        example: "2017-01-31"
      modifiedDueDate:
        description: Dealer can override the Due Date; also called Working Due Date; leave blank if unknown
        type: string
        format: date
        example: "2017-02-10"
      originalAmountDue:
        description: Total amount due from the deal; min "0.00", max "100000000.00"
        type: string
        minLength: 1
        maxLength: 12
        example: "1000.00"
      amountPaid:
        description: Total amount paid so far; min "0.00", max "100000000.00"
        type: string
        minLength: 1
        maxLength: 12
        example: "800.00"
      amountRemaining:
        description: The balance for this scheduled payment; min "-10000000.00", max "100000000.00"
        type: string
        minLength: 1
        maxLength: 12
        example: "200.00"
  # End of ScheduledRegularPayment definition

  TransactionStatus:
    description: "The status of a DMS transaction, such as normal or voided; more types may be added later"
    type: string
    enum:  
      - "NORMAL"
      - "VOID"
    example: "NORMAL"
  # End of TransactionStatus definition

# Added by API Auto Mocking Plugin
host: virtserver.swaggerhub.com
schemes:
 - https
# Added by API Auto Mocking Plugin
basePath: /carpay/CarpayDmsApi/1.3.6